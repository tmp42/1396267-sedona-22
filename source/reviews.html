<!DOCTYPE html>
<html class="page" lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width">
  <title>Седона</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="page__body">
<header class="page-header">
  <nav class="main-nav main-nav--closed main-nav--nojs">
    <button class="main-nav__toggle" type="button"><span class="visually-hidden">Открыть меню</span></button>
    <div class="main-nav__wrapper">
      <ul class="main-nav__list">
        <li class="main-nav__item">
          <a class="main-nav__link main-nav__link--active">
            Главная
          </a>
        </li>
        <li class="main-nav__item">
          <a class="main-nav__link" href="photogallery.html">
            Фото и видео
          </a>
        </li>
        <li class="main-nav__item">
          <a class="main-nav__link" href="reviews.html">
            Форма отзыва
          </a>
        </li>
        <li class="main-nav__item">
          <a class="main-nav__link" href="#">
            HTML Academy
          </a>
        </li>
      </ul>
      <a class="main-nav__logo" href="/">
      </a>
      <figure class="page-header__banner page-header__banner--inner">
        <img class="page-header__slogan page-header__slogan--inner" src="../img/text-sedona-inner.svg" width="460" height="80" alt="Седона»">
      </figure>
    </div>
  </nav>
</header>
<main class="page-main">
  <h1 class="visually-hidden">СЕДОНА — небольшой городок в Аризоне</h1>
  <div class="lead lead--reviews">
    <h2 class="lead__title">Оставьте свой отзыв</h2>
    <p class="lead__caption">Помогите нашим отелям стать лучше! оставьте отзыв о них, а также о посещенных вами
      достопримечательностях</p>
  </div>
  <form class="reviews-form" action="/echo.htmlacademy.ru" method="post">
    <fieldset class="reviews-form__fieldset reviews-form__fieldset--name">
      <legend class="reviews-form__legend reviews-form__legend--name">
        Представьтесь:
      </legend>
      <div class="reviews-form__group">
        <label class="reviews-form__label reviews-form__label--name" for="firstname">
          Имя<sup>*</sup>:
        </label>
        <input class="reviews-form__field reviews-form__field--name" type="text" name="firstname" id="firstname" placeholder="Петр" required="">
      </div>
      <div class="reviews-form__group">
        <label class="reviews-form__label reviews-form__label--name" for="surname"> Фамилия<sup>*</sup>:
        </label>
        <input class="reviews-form__field reviews-form__field--name" type="text" name="surname" id="surname" placeholder="Иванов">
      </div>
      <div class="reviews-form__group">
        <label class="reviews-form__label reviews-form__label--name" for="midname"> Отчество:
        </label>
        <input class="reviews-form__field reviews-form__field--name" type="text" name="midname" id="midname" placeholder="Александрович">
      </div>
    </fieldset>
    <fieldset class="reviews-form__fieldset reviews-form__fieldset--contacts">
      <legend class="reviews-form__legend reviews-form__legend--contacts"> Контактная информация:
      </legend>
      <div class="reviews-form__collection reviews-form__collection--contacts">
        <div class="reviews-form__group reviews-form__group--contacts">
          <label class="reviews-form__label reviews-form__label--contacts" for="phone"> <span>Контактный</span> телефон*:
          </label>
          <div class="reviews-form__wrap reviews-form__wrap--phone">
            <input class="reviews-form__field reviews-form__field--contacts" type="tel" name="phone" id="phone" placeholder="Введите телефон" pattern="[0-9]{1}-[0-9]{3}-[0-9]{7}">
          </div>
        </div>
        <div class="reviews-form__group reviews-form__group--contacts">
          <label class="reviews-form__label reviews-form__label--contacts" for="email">
            Электронная почта*:
          </label>
          <div class="reviews-form__wrap reviews-form__wrap--mail">
            <input class="reviews-form__field reviews-form__field--contacts" type="email" name="email" id="email" placeholder="Введите e-mail" pattern="[a-zA-Z]{2,}@[a-zA-Z]{2,}.[a-zA-Z]{2,}" required="">
          </div>
        </div>
      </div>
    </fieldset>
    <fieldset class="reviews-form__fieldset reviews-form__fieldset--impression">
      <legend class="reviews-form__legend reviews-form__legend--impression">
        Ваше общее впечатление:
      </legend>
      <div class="reviews-form__group reviews-form__group--impression">
        <input class="visually-hidden reviews-form__field reviews-form__field--impression" type="radio" name="rating" id="value1" checked="">
        <label class="reviews-form__label reviews-form__label--impression" for="value1">
          Скорее положительное
        </label>
      </div>
      <div class="reviews-form__group reviews-form__group--impression">
        <input class="visually-hidden reviews-form__field reviews-form__field--impression" type="radio" name="rating" id="value2">
        <label class="reviews-form__label reviews-form__label--impression" for="value2">
          Скорее отрицательное
        </label>
      </div>
      <div class="reviews-form__group reviews-form__group--impression">
        <input class="visually-hidden reviews-form__field reviews-form__field--impression" type="radio" name="rating" id="value3">
        <label class="reviews-form__label reviews-form__label--impression" for="value3">
          Затрудняюсь ответить
        </label>
      </div>
    </fieldset>
    <fieldset class="reviews-form__fieldset reviews-form__fieldset--places">
      <legend class="reviews-form__legend reviews-form__legend--places">
        Посещенные достопримечательности:
      </legend>
      <div class="reviews-form__collection">
        <div class="reviews-form__group reviews-form__group--places">
          <input class="visually-hidden reviews-form__field reviews-form__field--places" type="checkbox" name="check1" id="check1" checked="">
          <label class="reviews-form__label reviews-form__label--places" for="check1">
            Мост Дьявола
          </label>
        </div>
        <div class="reviews-form__group reviews-form__group--places">
          <input class="visually-hidden reviews-form__field reviews-form__field--places" type="checkbox" name="check2" id="check2" checked="">
          <label class="reviews-form__label reviews-form__label--places" for="check2">
            Гора-Колокол
          </label>
        </div>
        <div class="reviews-form__group reviews-form__group--places">
          <input class="visually-hidden reviews-form__field reviews-form__field--places" type="checkbox" name="check3" id="check3">
          <label class="reviews-form__label reviews-form__label--places" for="check3">
            Слайд-парк
          </label>
        </div>
        <div class="reviews-form__group reviews-form__group--places">
          <input class="visually-hidden reviews-form__field reviews-form__field--places" type="checkbox" name="check4" id="check4" checked="">
          <label class="reviews-form__label reviews-form__label--places" for="check4">
            Красные скалы
          </label>
        </div>
      </div>
    </fieldset>
    <fieldset class="reviews-form__fieldset reviews-form__fieldset--emotions">
      <legend class="reviews-form__legend reviews-form__legend--emotions">
        Опишите свои эмоции:
      </legend>
      <textarea class="reviews-form__field reviews-form__field--emotions" name="overview" id="overview"
                placeholder="Опишите подробно все свои восторги"></textarea>
    </fieldset>
    <div class="reviews-form__wrap">
      <button class="button reviews-form__button" type="submit" value="Отправить отзыв">Отправить отзыв</button>
      <span class="reviews-form__note">* — обязательные поля</span>
    </div>
  </form>
</main>
<footer class="page-footer">
  <div class="page-footer__wrapper">
    <h3 class="page-footer__hashtag">
      #visitsedona
    </h3>
    <div class="page-footer__social social">
      <ul class="social__list">
        <li class="social__item">
          <a class="social__link social__link--twitter" href="https://twitter.com/htmlacademy">
            <svg width="40%" height="19px">
              <use xlink:href="#icon-twitter"></use>
            </svg>
          </a>
        </li>
        <li class="social__item">
          <a class="social__link social__link--facebook" href="https://www.facebook.com/htmlacademy">
            <svg width="20%" height="19px">
              <use xlink:href="#icon-facebook"></use>
            </svg>
          </a>
        </li>
        <li class="social__item">
          <a class="social__link social__link--youtube" href="https://www.youtube.com/htmlacademy">
            <svg width="50%" height="19px">
              <use xlink:href="#icon-youtube"></use>
            </svg>
          </a>
        </li>
      </ul>
    </div>
    <div class="page-footer__copyright copyright">
      <span class="copyright__text">Разработано</span>
      <a class="copyright__link" href="https://htmlacademy.ru/intensive/adaptive">
        <svg width="26.943px" height="34.09px" viewBox="0 0 26.943 34.09">
          <use xlink:href="#icon-logo-htmlacademy"></use>
        </svg></a>
    </div>
  </div>
</footer>
<section class="failure-pop-up">
  <h2 class="failure-pop-up__title font-title font-title--big">Что-то пошло <br class="tablet-br">не так!</h2>
  <p class="failure-pop-up__text">Проверьте поля выделенные красным, скорее всего вы забыли их заполнить.</p>
  <button class="failure-pop-up__button button font-btn">Ok</button>
</section>
<section class="success-pop-up">
  <h2 class="success-pop-up__title font-title font-title--big">Ваш отзыв отправлен!</h2>
  <p class="success-pop-up__text">Спасибо за ваше участие, ваш отзыв уже поступил к нам. В ближайшее время мы опубликуем его на сайте.</p>
  <div class="success-pop-up__button-wrap">
    <button class="success-pop-up__button button font-btn">Закрыть окно</button>
  </div>
</section>
</body>
<script>
  let navMain = document.querySelector('.main-nav');
  let navToggle = document.querySelector('.main-nav__toggle');

  navMain.classList.remove('main-nav--nojs');

  navToggle.addEventListener('click', function () {
    if (navMain.classList.contains('main-nav--closed')) {
      navMain.classList.remove('main-nav--closed');
      navMain.classList.add('main-nav--opened');
    } else {
      navMain.classList.add('main-nav--closed');
      navMain.classList.remove('main-nav--opened');
    }
  });

  "use strict";

  var failurePopUp = document.querySelector(".failure-pop-up"),
    successPopUp = document.querySelector(".success-pop-up");

  var formFeedback = document.querySelector(".reviews-form"),
    btn = document.querySelector(".reviews-form__button"),
    inputs = formFeedback.querySelectorAll("input[required]");

  failurePopUp.classList.remove("failure-pop-up--visible");
  successPopUp.classList.remove("success-pop-up--visible");

  console.log(inputs);

  // заполнены важные поля
  var ok = [];

  //подписка за событие о заполнении инпутов
  Array.from(inputs).forEach(function(el) {
    el.addEventListener("change", function() {
      if (ok.length == 3) {
        btn.classList.remove("button-disable");
      } else {
        ok.push(el);
      }
    });
  })

  //обработка клика отправки формы -> показ модальных окон
  btn.addEventListener("click", function(event) {
    event.preventDefault();
    if (btn.classList.contains("button-disable")) {
      return;
    } else {
      var err = Array.from(inputs).find(function(el) {
        el.value == "";
      });

      if (err) {
        failurePopUp.classList.add("failure-pop-up--visible");
      } else {
        successPopUp.classList.add("success-pop-up--visible");
        //функция отправки формы
      }
    }
  })

  //закрывает модальное окно
  failurePopUp.querySelector(".failure-pop-up__button").addEventListener("click", function() {
    failurePopUp.classList.remove("failure-pop-up--visible");
  });

  //закрывает модальное окно
  successPopUp.querySelector(".success-pop-up__button").addEventListener("click", function() {
    successPopUp.classList.remove("success-pop-up--visible");
  });

</script>
</html>
